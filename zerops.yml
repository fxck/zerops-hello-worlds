zerops:
  - setup: nodejs20
    build:
      base: nodejs@20
      prepareCommands:
        - npm install -g typescript
      buildCommands:
        - |
          cd nodejs
          export NODE_ENV=development
          npm i
          npm run build
      deploy:
        - ./nodejs/~/dist
        - ./nodejs/~/node_modules
        - ./nodejs/~/package.json
    run:
      start: npm run start:prod
      healthCheck:
        httpGet:
          port: 80
          path: /status

  - setup: golang1
    build:
      base: go@1
      buildCommands:
        - |
          cd golang
          go build -o golang ./...
      deploy:
        - ./golang/~/golang
    run:
      start: ./golang
      healthCheck:
        httpGet:
          port: 80
          path: /status

  - setup: phpapache81
    build:
      base: php@8.1
      buildCommands:
        - |
          cd php
          composer install --optimize-autoloader --no-dev
      deploy:
        - ./php/~/index.php
        - ./php/~/.htaccess
        - ./php/~/vendor
    run:
      documentRoot: ./
      healthCheck:
        httpGet:
          port: 80
          path: /status

